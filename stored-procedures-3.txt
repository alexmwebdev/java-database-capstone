mysql> CREATE PROCEDURE GetDoctorWithMostPatientsByYear(
    ->     IN input_year INT
    -> )
    -> BEGIN
    ->     SELECT
    ->         doctor_id, 
    ->         COUNT(patient_id) AS patients_seen
    ->     FROM
    ->         appointment
    ->     WHERE
    ->         YEAR(appointment_time) = input_year
    ->     GROUP BY
    ->         doctor_id
    ->     ORDER BY
    ->         patients_seen DESC
    ->     LIMIT 1;
    -> END $$
Query OK, 0 rows affected (0.01 sec)

mysql> 
mysql> DELIMITER ;
mysql> CALL GetDoctorWithMostPatientsByYear(2025);
+-----------+---------------+
| doctor_id | patients_seen |
+-----------+---------------+
|         1 |            34 |
+-----------+---------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec)